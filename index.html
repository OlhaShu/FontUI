import React, { useState } from 'react';
import { Info, X, Check, Star, AlertTriangle } from 'lucide-react';

const FontPairingMatrix = () => {
  // Список шрифтів для заголовків (вертикаль)
  const headerFonts = [
    { name: 'Montserrat', type: 'Sans (Geo)', style: 'font-montserrat' },
    { name: 'Playfair Display', type: 'Serif (High Contrast)', style: 'font-playfair' },
    { name: 'Oswald', type: 'Sans (Condensed)', style: 'font-oswald' },
    { name: 'Bebas Neue', type: 'Display (Caps)', style: 'font-bebas' },
    { name: 'Roboto Slab', type: 'Slab Serif', style: 'font-roboto-slab' },
    { name: 'Cinzel', type: 'Decorative', style: 'font-cinzel' },
  ];

  // Список шрифтів для основного тексту (горизонталь)
  const bodyFonts = [
    { name: 'Inter', type: 'Sans (Neutral)', style: 'font-inter' },
    { name: 'Open Sans', type: 'Sans (Humanist)', style: 'font-open-sans' },
    { name: 'Roboto', type: 'Sans (Neo-Grotesque)', style: 'font-roboto' },
    { name: 'Merriweather', type: 'Serif (Readable)', style: 'font-merriweather' },
    { name: 'Lora', type: 'Serif (Calligraphic)', style: 'font-lora' },
  ];

  // Матриця сумісності
  // 0 = Погано (Bad), 1 = Нормально (Neutral), 2 = Добре (Good), 3 = Чудово (Great/Gold)
  const compatibility = {
    'Montserrat': { 'Inter': 1, 'Open Sans': 2, 'Roboto': 2, 'Merriweather': 3, 'Lora': 3 },
    'Playfair Display': { 'Inter': 3, 'Open Sans': 3, 'Roboto': 2, 'Merriweather': 1, 'Lora': 1 }, // Serif header + Sans body is classic. Serif+Serif is risky.
    'Oswald': { 'Inter': 2, 'Open Sans': 3, 'Roboto': 3, 'Merriweather': 2, 'Lora': 1 },
    'Bebas Neue': { 'Inter': 2, 'Open Sans': 2, 'Roboto': 3, 'Merriweather': 1, 'Lora': 0 },
    'Roboto Slab': { 'Inter': 2, 'Open Sans': 2, 'Roboto': 3, 'Merriweather': 0, 'Lora': 0 }, // Slab + Sans is good. Slab + Serif is clash.
    'Cinzel': { 'Inter': 2, 'Open Sans': 1, 'Roboto': 1, 'Merriweather': 2, 'Lora': 3 }, // History + History
  };

  const getRating = (header, body) => {
    return compatibility[header][body];
  };

  const getRatingData = (rating) => {
    switch (rating) {
      case 3: return { color: 'bg-emerald-500', icon: Star, text: 'Ідеально', desc: 'Високий контраст або перевірена класика.' };
      case 2: return { color: 'bg-lime-400', icon: Check, text: 'Добре', desc: 'Безпечний вибір, читабельно і чисто.' };
      case 1: return { color: 'bg-gray-200', icon: Info, text: 'Нейтрально', desc: 'Трохи нудно або не вистачає контрасту.' };
      case 0: return { color: 'bg-red-400', icon: X, text: 'Не варто', desc: 'Конфлікт стилів або погана читабельність.' };
      default: return { color: 'bg-gray-100', icon: Info, text: '-', desc: '' };
    }
  };

  const [hoveredPair, setHoveredPair] = useState(null);

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-8 font-sans text-slate-800">
      
      {/* Google Fonts Import via style tag for preview accuracy */}
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&family=Lora:ital,wght@0,400;1,400&family=Merriweather:wght@300;400;700&family=Montserrat:wght@400;700;800&family=Open+Sans:wght@400;600&family=Oswald:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Roboto+Slab:wght@400;700&family=Roboto:wght@400;500&display=swap');
        
        .font-montserrat { font-family: 'Montserrat', sans-serif; }
        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-oswald { font-family: 'Oswald', sans-serif; }
        .font-bebas { font-family: 'Bebas Neue', cursive; }
        .font-roboto-slab { font-family: 'Roboto Slab', serif; }
        .font-cinzel { font-family: 'Cinzel', serif; }
        
        .font-inter { font-family: 'Inter', sans-serif; }
        .font-open-sans { font-family: 'Open Sans', sans-serif; }
        .font-roboto { font-family: 'Roboto', sans-serif; }
        .font-merriweather { font-family: 'Merriweather', serif; }
        .font-lora { font-family: 'Lora', serif; }
      `}</style>

      <div className="max-w-6xl mx-auto">
        <div className="mb-8 text-center">
          <h1 className="text-3xl md:text-4xl font-bold mb-2 text-slate-900">Матриця Шрифтових Пар 2025</h1>
          <p className="text-slate-500">Наведіть на клітинку, щоб побачити деталі поєднання</p>
        </div>

        {/* Legend */}
        <div className="flex flex-wrap justify-center gap-4 mb-8 text-sm">
          <div className="flex items-center gap-2"><div className="w-4 h-4 bg-emerald-500 rounded"></div><span>Ідеально (Контраст)</span></div>
          <div className="flex items-center gap-2"><div className="w-4 h-4 bg-lime-400 rounded"></div><span>Добре (Безпечно)</span></div>
          <div className="flex items-center gap-2"><div className="w-4 h-4 bg-gray-200 rounded border border-gray-300"></div><span>Нудно / Нейтрально</span></div>
          <div className="flex items-center gap-2"><div className="w-4 h-4 bg-red-400 rounded"></div><span>Конфлікт (Не треба)</span></div>
        </div>

        {/* Matrix Container */}
        <div className="bg-white rounded-xl shadow-xl overflow-hidden border border-slate-200">
          <div className="overflow-x-auto">
            <table className="w-full min-w-[800px]">
              <thead>
                <tr>
                  <th className="p-4 bg-slate-100 border-b border-slate-200 w-1/6 h-40 align-bottom">
                    <div className="flex flex-col items-end text-right h-full justify-between">
                      <span className="text-xs text-slate-400 uppercase tracking-widest mb-1">Заголовок</span>
                      {/* Fixed: Replaced '->' with arrow symbol to avoid JSX syntax error */}
                      <span className="text-xs text-slate-400 uppercase tracking-widest rotate-90 origin-right translate-y-8 translate-x-4 whitespace-nowrap">Текстовий блок →</span>
                    </div>
                  </th>
                  {bodyFonts.map((font) => (
                    <th key={font.name} className="p-4 border-b border-l border-slate-100 text-left min-w-[140px] bg-slate-50 align-bottom">
                      <div className={`text-lg font-bold text-slate-800 ${font.style}`}>{font.name}</div>
                      <div className="text-xs text-slate-500 font-normal mt-1">{font.type}</div>
                    </th>
                  ))}
                </tr>
              </thead>
              <tbody>
                {headerFonts.map((header) => (
                  <tr key={header.name}>
                    <th className="p-4 border-b border-slate-100 bg-slate-50 text-right sticky left-0 z-10">
                      <div className={`text-xl md:text-2xl text-slate-800 leading-tight ${header.style}`}>{header.name}</div>
                      <div className="text-xs text-slate-400 font-normal mt-1">{header.type}</div>
                    </th>
                    {bodyFonts.map((body) => {
                      const rating = getRating(header.name, body.name);
                      const data = getRatingData(rating);
                      const isHovered = hoveredPair?.header === header.name && hoveredPair?.body === body.name;

                      return (
                        <td 
                          key={`${header.name}-${body.name}`}
                          className="border-b border-l border-slate-100 p-2 relative group cursor-pointer transition-all duration-200 hover:z-20"
                          onMouseEnter={() => setHoveredPair({ header: header.name, body: body.name, rating, data })}
                          onMouseLeave={() => setHoveredPair(null)}
                        >
                          <div className={`w-full h-16 md:h-20 rounded-lg flex items-center justify-center transition-all ${data.color} ${isHovered ? 'scale-110 shadow-lg ring-2 ring-blue-400' : 'opacity-90'}`}>
                             {isHovered ? (
                               <data.icon className="w-8 h-8 text-black/50" />
                             ) : (
                               <div className="w-4 h-4 rounded-full bg-white/30"></div>
                             )}
                          </div>
                        </td>
                      );
                    })}
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>

        {/* Live Preview Section */}
        <div className="mt-12 grid md:grid-cols-2 gap-8">
            <div className="bg-white p-8 rounded-xl shadow-lg border border-slate-200">
               <h3 className="text-sm font-bold text-slate-400 uppercase tracking-widest mb-6">Попередній перегляд обраної пари</h3>
               
               {hoveredPair ? (
                 <div>
                    <div className="flex items-center gap-3 mb-4">
                        <span className={`px-3 py-1 rounded-full text-xs font-bold ${hoveredPair.data.color}`}>
                            {hoveredPair.data.text}
                        </span>
                        <span className="text-sm text-slate-500">{hoveredPair.data.desc}</span>
                    </div>

                    <div className="border-l-4 border-indigo-500 pl-6 py-2">
                        <h2 className={`text-4xl mb-4 text-slate-900 ${headerFonts.find(f => f.name === hoveredPair.header).style}`}>
                            {hoveredPair.header}: Елегантний Заголовок
                        </h2>
                        <p className={`text-base leading-relaxed text-slate-600 ${bodyFonts.find(f => f.name === hoveredPair.body).style}`}>
                            Це приклад тексту, набраного шрифтом {hoveredPair.body}. 
                            Він використовується для масивів інформації, статей та описів. 
                            У поєднанні з акцентним заголовком це створює візуальну гармонію.
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                        </p>
                    </div>
                 </div>
               ) : (
                 <div className="h-40 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200 rounded-lg">
                    <Info className="w-8 h-8 mb-2 opacity-50"/>
                    <p>Наведіть на будь-який квадрат у таблиці</p>
                 </div>
               )}
            </div>

            <div className="bg-slate-900 text-white p-8 rounded-xl shadow-lg">
               <h3 className="text-sm font-bold text-slate-400 uppercase tracking-widest mb-6">Чому це важливо?</h3>
               <ul className="space-y-4 text-sm md:text-base">
                   <li className="flex gap-3">
                       <Star className="w-5 h-5 text-yellow-400 shrink-0" />
                       <span><strong>Контраст:</strong> Поєднуйте шрифти з різним характером (наприклад, Антиква в заголовку + Гротеск в тексті).</span>
                   </li>
                   <li className="flex gap-3">
                       <Check className="w-5 h-5 text-emerald-400 shrink-0" />
                       <span><strong>Читабельність:</strong> Для основного тексту завжди обирайте шрифти з гарною читабельністю (Inter, Roboto, Merriweather).</span>
                   </li>
                   <li className="flex gap-3">
                       <AlertTriangle className="w-5 h-5 text-red-400 shrink-0" />
                       <span><strong>Уникайте схожості:</strong> Не поєднуйте два схожих гротеска (наприклад, Arial та Helvetica) — це виглядає як помилка.</span>
                   </li>
               </ul>
            </div>
        </div>

      </div>
    </div>
  );
};

export default FontPairingMatrix;
